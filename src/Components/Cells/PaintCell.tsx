import { PaintGameCell, TrackDirection, TrainDirection } from "../../Game/Game";
import IconSvg, { InArrowSvg } from "./IconSvg";
import { getIconColor } from "../TrainIcon";

export function getDirections(direction: TrackDirection): TrainDirection[] {
    if (direction === "horizontal") {
        return ["left", "right"];
    } else if (direction === "vertical") {
        return ["top", "bottom"];
    } else {
        return direction.split('-') as TrainDirection[];
    }
}

export default function PaintCell({ cell }: { cell: Readonly<PaintGameCell> }) {
    //From https://www.svgrepo.com/svg/164230/paintbrush
    const color = getIconColor(cell.color);
    const directions = getDirections(cell.direction);
    return (
        <IconSvg>
            {directions.map(d => <InArrowSvg key={d} direction={d} />)}

            <rect x="12" y="12" width="65" height="65" fill="transparent" stroke={color} strokeWidth="3" rx="5" />

            <g transform="translate(15,15)">
                <path fill={color} d="M 59.40625 23.34375 C 60.199219 22.554688 60.199219 21.273438 59.40625 20.484375 L 56.371094 17.449219 C 55.683594 16.761719 54.605469 16.660156 53.804688 17.207031 L 47.421875 21.542969 L 51.734375 15.117188 C 52.269531 14.316406 52.167969 13.242188 51.484375 12.558594 L 44.898438 5.976562 C 44.289062 5.367188 43.363281 5.210938 42.589844 5.582031 L 41.453125 6.132812 L 41.996094 4.921875 C 42.34375 4.15625 42.175781 3.253906 41.582031 2.660156 L 39.515625 0.59375 C 38.726562 -0.199219 37.445312 -0.199219 36.65625 0.59375 L 20.597656 16.648438 L 43.351562 39.402344 Z M 59.40625 23.34375 " />
                <path fill="beige" d="M 17.609375 19.640625 L 12.960938 24.289062 C 12.582031 24.667969 12.367188 25.179688 12.367188 25.71875 C 12.367188 26.253906 12.582031 26.769531 12.960938 27.148438 L 17.367188 31.558594 C 18.21875 32.40625 18.628906 33.578125 18.5 34.773438 C 18.367188 35.96875 17.710938 37.023438 16.695312 37.667969 C 3.742188 45.929688 2.53125 47.136719 2.136719 47.535156 C -0.710938 50.382812 -0.710938 55.015625 2.136719 57.863281 C 4.988281 60.714844 9.621094 60.710938 12.464844 57.863281 C 12.863281 57.46875 14.070312 56.257812 22.332031 43.304688 C 22.976562 42.292969 24.03125 41.636719 25.222656 41.503906 C 26.421875 41.375 27.59375 41.785156 28.441406 42.632812 L 32.851562 47.039062 C 33.640625 47.832031 34.921875 47.832031 35.710938 47.039062 L 40.359375 42.390625 Z M 9.445312 54.597656 C 8.332031 55.714844 6.519531 55.714844 5.402344 54.597656 C 4.285156 53.480469 4.285156 51.667969 5.402344 50.554688 C 6.519531 49.4375 8.332031 49.4375 9.445312 50.554688 C 10.5625 51.667969 10.5625 53.480469 9.445312 54.597656 Z M 9.445312 54.597656 " />
            </g>
        </IconSvg>
    );
}